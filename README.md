# EVote

EVote is a weighted faculty election system created using the Django web framework (1.11.6), written in Python (Python 3.6.2).
For a vast amount of information on how Django implements its MVC framework, refer to the documentation.
https://docs.djangoproject.com/en/2.0/

### Debugging

To run a debug instance of EVote 

navigate to _website/website/settings.py_ and set DEBUG=True

Then run

> python3 \website\manage.py runserver



### Database
For information on how Django implements databases and on how to perform queries please refer to the Django docs.

https://docs.djangoproject.com/en/2.0/ref/databases/

https://docs.djangoproject.com/en/2.0/topics/db/queries/

Django uses mysql stored in \website\db.sqlite3. If no such file exists then run.
> source ~/django/bin/activate

> python manage.py migrate --run-syncdb

If you want to purge the entire database

> delete db.sqlite3

> delete everything in website\vote\migrations

> run the syncdb command above

#### Tables:

Tables in Django are known as models. The following are tables in "db.sqlite3"

auth_group
auth_group_permissions
auth_permission
auth_user
auth_user_groups
auth_user_user_permissions
django_admin_log
django_content_type
django_migrations
django_session
vote_election
vote_faculty
vote_nominee
vote_record

Every table except vote_* are automatically generated by Django.

vote_election : Table that contains the election token and election settings (anonymous voting, multi-voting, the final datetime to vote).
vote_faculty : Table that contains a faculty's information (name, email).
vote_nominee : Table that contains the different faculties that's up for election.
vote_record : Table that contains the nominee selected by a voter in an election.

![Entity Relationship Diagram](https://raw.githubusercontent.com/michaelsoltys/EVote/master/ERD.png)

Django implements the database manipulation using an object oriented paradigm.

_models.py_ contains information on the data models used in EVote.

_queries.py_ contains direct data model manipulation and lookup (Not just queries).

The Entity Relationship Diagram (ERD) is located in a gliffy file in the root folder.

In order to open the .gliffy file

> Install Google Chrome

> Go to the Google Chrome App Store

> Install "Gliffy Diagrams"

EVote's database model stores not only information about the current election, but also all past elections. It also maintains a database of all faculty that have participated in elections and whether they were nominees or voters. Currently there is no way of obtaining tokens from old elections so the only solution is to hold on to important tokens or implement the functionality.

### TODO
Implement proper logging

Implement SSL
Option 1:
Using nginx
Option 2:
Using AWS Certificate Manager
https://aws.amazon.com/certificate-manager/ (Verify that it's free with Amazon EC2)

Implement an error message label that appears upon exception (Ex. Invalid token, election expired, you already voted).

_queries.py_: Disable voting access to an election after the deadline.

_forms.py_: Implement AdminDateWidget and AdminTimeWidget in order to use widgets to easily select a date and time when making a new election.
https://stackoverflow.com/questions/38601/using-django-time-date-widgets-in-custom-form

Although Django itself is relatively secure and is constantly updating it's security, we need to implement the security features. This includes requiring authentication in order to see election results and creating a new election. We also need to explicitly allow certain hosts with access under _website/website/settings.py_

https://docs.djangoproject.com/en/2.0/topics/security/
